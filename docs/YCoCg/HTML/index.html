<!DOCTYPE html> 
<html lang='en-US' xml:lang='en-US'> 
<head> <title>The YCoCg Transform</title> 
<meta charset='utf-8' /> 
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' /> 
<meta content='width=device-width,initial-scale=1' name='viewport' /> 
<link href='index.css' rel='stylesheet' type='text/css' /> 
<meta content='index.tex' name='src' /> 
<script>window.MathJax = { tex: { tags: "ams", }, }; </script> 
 <script async='async' id='MathJax-script' src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js' type='text/javascript'></script>  
</head><body>
   <div class='maketitle'>
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class='titleHead'>The \(\text {YCoCg}\) Transform</h2>
 <div class='author'><a href='https://cms.ual.es/UAL/personas/persona.htm?id=515256515553484875'><span class='ecrm-1200'>Vicente González Ruiz</span></a> <span class='ecrm-1200'>- </span><a href='https://cms.ual.es/UAL/universidad/departamentos/informatica/index.htm'><span class='ecrm-1200'>Depto Informática</span></a> <span class='ecrm-1200'>- </span><a href='https://www.ual.es'><span class='ecrm-1200'>UAL</span></a></div><br />
<div class='date'><span class='ecrm-1200'>November 28, 2022</span></div>
   </div>
   <h3 class='likesectionHead' id='contents'><a id='x1-1000'></a>Contents</h3>
   <div class='tableofcontents'>
    <span class='sectionToc'>1 <a href='#the-ycocg-color-domain' id='QQ2-1-2'>The \(\text {YCoCg}\) color domain</a></span>
<br />    <span class='sectionToc'>2 <a href='#chroma-redundancy' id='QQ2-1-3'>Chroma redundancy</a></span>
<br />    <span class='sectionToc'>3 <a href='#the-rgb-ycocg-transform' id='QQ2-1-4'>The \(\text {RGB} \Leftrightarrow \text {YCoCg}\) transform</a></span>
<br />    <span class='sectionToc'>4 <a href='#resources' id='QQ2-1-5'>Resources</a></span>
   </div>
<!-- l. 8 --><p class='noindent'>
</p>
   <h3 class='sectionHead' id='the-ycocg-color-domain'><span class='titlemark'>1   </span> <a id='x1-20001'></a>The \(\text {YCoCg}\) color domain</h3>
<!-- l. 9 --><p class='noindent'>\(\text {YCoCg}\) is a <span class='ecti-1000'>luma</span>-based (luminance-based<span class='footnote-mark'><a href='#fn1x0' id='fn1x0-bk'><sup class='textsuperscript'>1</sup></a></span><a id='x1-2001f1'></a>
color domain. This domain rely on the idea of separating the luminance
coefficients (Y) from two <span class='ecti-1000'>chroma </span>coefficients (orange and green in the case of
\(\text {YCoCg}\)).
</p><!-- l. 15 --><p class='indent'>   The \(\text {YCoCg}\) color model is a succesor of th \(\text {YCrCb}\) one, where the transform filters
has been redefined to be more efficient (considering more and new images).
Moreover, it can be also considered a the digital version of the <a href='https://en.wikipedia.org/wiki/YUV'>\(\text {YUV}\) (analog) color
model</a>.
</p><!-- l. 22 --><p class='noindent'>
</p>
                                                                  

                                                                  
   <h3 class='sectionHead' id='chroma-redundancy'><span class='titlemark'>2   </span> <a id='x1-30002'></a>Chroma redundancy</h3>
<!-- l. 24 --><p class='noindent'>Humans do not perceive detail in the chrominance as well as in they does in
the luminance. <span class='cite'>[<span class='ecbx-1000'>?</span>, <span class='ecbx-1000'>?</span>]</span>. As in \(\text {YCrCb}\), the <a href='https://en.wikipedia.org/wiki/Sampling_(signal_processing)'>sampling rate</a> of the chroma is usually
reduces to 1/4 without any noticeable distortion. This feature is used in some
of the last image and video compression systems such as <a href='https://en.wikipedia.org/wiki/JPEG_XR#Description'>JPEG XR</a> and
<a href='https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding#Video_coding_layer'>HEVC</a>.
</p><!-- l. 35 --><p class='noindent'>
</p>
   <h3 class='sectionHead' id='the-rgb-ycocg-transform'><span class='titlemark'>3   </span> <a id='x1-40003'></a>The \(\text {RGB} \Leftrightarrow \text {YCoCg}\) transform</h3>
<!-- l. 38 --><p class='noindent'>Clearly, orthogonality is a desired property in lossy compression systems because it helps
to isolate<span class='footnote-mark'><a href='#fn2x0' id='fn2x0-bk'><sup class='textsuperscript'>2</sup></a></span><a id='x1-4001f2'></a>
the impact (in the case of a color transform) of each color subband on the quality of
the reconstruction of the image, simplifying significantly the determination of the
pattern of QSs that generate the optimal RD curve.
</p><!-- l. 45 --><p class='indent'>   Moreover, Eqs. <span class='ecbx-1000'>??</span> and <span class='ecbx-1000'>??</span> were derived by <a href='https://en.wikipedia.org/wiki/Principal_component_analysis'>Principal Component Analysis (PCA)</a> on
old<span class='footnote-mark'><a href='#fn3x0' id='fn3x0-bk'><sup class='textsuperscript'>3</sup></a></span><a id='x1-4002f3'></a>
video data. The same procedure has been carried out with
newer<span class='footnote-mark'><a href='#fn4x0' id='fn4x0-bk'><sup class='textsuperscript'>4</sup></a></span><a id='x1-4003f4'></a>
images, obtaining \begin {equation}  \begin {bmatrix} \text {Y} \\ \text {C}_1 \\ \text {C}_2 \end {bmatrix} = \begin {bmatrix} \frac {1}{3} &amp; \frac {1}{3} &amp; \frac {1}{3} \\ \frac {1}{2} &amp; 0 &amp; -\frac {1}{2} \\ -\frac {1}{4} &amp; \frac {1}{2} &amp; -\frac {1}{4} \end {bmatrix} \begin {bmatrix} \text {R} \\ \text {G} \\ \text {B} \end {bmatrix} \Leftrightarrow \begin {bmatrix} \text {R} \\ \text {G} \\ \text {B} \end {bmatrix} = \begin {bmatrix} 1 &amp; 1 &amp; -\frac {2}{3} \\ 1 &amp; 0 &amp; \frac {4}{3} \\ 1 &amp; -1 &amp; -\frac {2}{3} \end {bmatrix} \begin {bmatrix} \text {Y} \\ \text {C}_1 \\ \text {C}_2 \end {bmatrix}. \label {eq:optimal}  \end {equation}
</p><!-- l. 90 --><p class='indent'>   The <a href='https://en.wikipedia.org/wiki/YCoCg'>YCoCg</a> color transform is orthogonal and the synthesis filters
gains<span class='footnote-mark'><a href='#fn5x0' id='fn5x0-bk'><sup class='textsuperscript'>5</sup></a></span><a id='x1-4004f5'></a>
are 22/9 (for \(\text {Y}\)), 25/9 (for \(\text {C}_1\)) and 22/9 (for \(\text {C}_2\)).
</p><!-- l. 96 --><p class='indent'>   Unfortunately, from a perceptual perspective we must impose (thinking of the
subsampling of the chromas) some features in a color transform (such as the influence
of the green channel on the luma channel should be high) that violates the
orthogonality constrain <span class='cite'>[<span class='ecbx-1000'>?</span>]</span>. For this reason the authors finally propose the transform
\begin {equation}  \begin {bmatrix} \text {Y} \\ \text {Co} \\ \text {Cg} \end {bmatrix} = \begin {bmatrix} \frac {1}{4} &amp; \frac {1}{2} &amp; \frac {1}{4} \\ \frac {1}{2} &amp; 0 &amp; -\frac {1}{2} \\ -\frac {1}{4} &amp; \frac {1}{2} &amp; -\frac {1}{4} \end {bmatrix} \begin {bmatrix} \text {R} \\ \text {G} \\ \text {B} \end {bmatrix} \Leftrightarrow \begin {bmatrix} \text {R} \\ \text {G} \\ \text {B} \end {bmatrix} = \begin {bmatrix} 1 &amp; 1 &amp; -1 \\ 1 &amp; 0 &amp; 1 \\ 1 &amp; -1 &amp; -1 \end {bmatrix} \begin {bmatrix} \text {Y} \\ \text {Co} \\ \text {Cg} \end {bmatrix},  \end {equation}
that is near orthogonal<span class='footnote-mark'><a href='#fn6x0' id='fn6x0-bk'><sup class='textsuperscript'>6</sup></a></span><a id='x1-4005f6'></a>,
and has channel gains 3 (\(\text {Y}\)), 2 (\(\text {Co}\)) and 3 (\(\text {Cg}\)).
</p><!-- l. 144 --><p class='indent'>   Again, notice that if the \(\text {RGB}\) values ranges between \(0\) and \(255\) (and rounding to the
nearest integer), \(0\le \text {Y}\le 255\), \(-128\le \text {Co}\le 127\) and \(-128\le \text {Cg}\le 127\), and therefore, the number of bits that are necessary to
represent each component is \(8\). Therefore, we can use the same QS range for each
component. See this <a href='https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/YCrCb_matrix.ipynb'>notebook</a>.
</p><!-- l. 153 --><p class='noindent'>
</p>
   <h3 class='sectionHead' id='resources'><span class='titlemark'>4   </span> <a id='x1-50004'></a>Resources</h3>
                                                                  

                                                                  
   <div class='footnotes'><!-- l. 11 --><p class='indent'>     <span class='footnote-mark'><a href='#fn1x0-bk' id='fn1x0'><sup class='textsuperscript'>1</sup></a></span><span class='ecrm-0800'>Luminance can be considered as the intensity part of a viual stimuli.</span></p>
<!-- l. 40 --><p class='indent'>     <span class='footnote-mark'><a href='#fn2x0-bk' id='fn2x0'><sup class='textsuperscript'>2</sup></a></span><span class='ecrm-0800'>Without considering the rest of components.</span></p>
<!-- l. 48 --><p class='indent'>     <span class='footnote-mark'><a href='#fn3x0-bk' id='fn3x0'><sup class='textsuperscript'>3</sup></a></span><span class='ecrm-0800'>Recorded with the first analog color cameras in the 70’s.</span></p>
<!-- l. 50 --><p class='indent'>     <span class='footnote-mark'><a href='#fn4x0-bk' id='fn4x0'><sup class='textsuperscript'>4</sup></a></span><span class='cite'><span class='ecrm-0800'>[</span><span class='ecbx-0800'>?</span><span class='ecrm-0800'>]</span></span> <span class='ecrm-0800'>is dated in 2008.</span></p>
<!-- l. 93 --><p class='indent'>     <span class='footnote-mark'><a href='#fn5x0-bk' id='fn5x0'><sup class='textsuperscript'>5</sup></a></span><span class='ecrm-0800'>The gain of a transform can be determined computing the squared norm of the rows of the
</span><span class='ecrm-0800'>synthesis transform (the synthesis filters).</span></p>
<!-- l. 141 --><p class='indent'>     <span class='footnote-mark'><a href='#fn6x0-bk' id='fn6x0'><sup class='textsuperscript'>6</sup></a></span><span class='ecrm-0800'>For example,</span> \(\frac {1}{4}\frac {-1}{4} + \frac {1}{2}\frac {1}{2} + \frac {1}{4}\frac {-1}{4} = \frac {1}{8}\)<span class='ecrm-0800'>, and we should obtain always 0.</span></p>                                                  </div>
 
</body> 
</html>