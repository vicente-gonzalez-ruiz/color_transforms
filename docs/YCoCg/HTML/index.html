<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" 
"http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd" > 
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>The YCoCg Transform</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- xhtml,mathml,html --> 
<meta name="src" content="index.tex" /> 
<link rel="stylesheet" type="text/css" href="index.css" /> 
</head><body 
>
   <div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead">The
<!--l. 4--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
Transform</h2>
 <div class="author" ><a 
href="https://cms.ual.es/UAL/personas/persona.htm?id=515256515553484875" ><span 
class="ecrm-1200">Vicente Gonz</span><span 
class="ecrm-1200">&#x00E1;</span><span 
class="ecrm-1200">lez Ruiz</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://cms.ual.es/UAL/universidad/departamentos/informatica/index.htm" ><span 
class="ecrm-1200">Depto Inform</span><span 
class="ecrm-1200">&#x00E1;</span><span 
class="ecrm-1200">tica</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://www.ual.es" ><span 
class="ecrm-1200">UAL</span></a></div><br />
<div class="date" ><span 
class="ecrm-1200">December 4, 2022</span></div>
   </div>
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
   <div class="tableofcontents">
   &#x00A0;<span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">The <!--l. 3--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
color domain</a></span>
<br />   &#x00A0;<span class="sectionToc" >2              <a 
href="#x1-30002" id="QQ2-1-3">Color              decorrelation              with              the
<!--l. 4--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math> transform</a></span>
<br />   &#x00A0;<span class="sectionToc" >3 <a 
href="#x1-40003" id="QQ2-1-4">E&#xFB00;ects of the transform</a></span>
<br />   &#x00A0;<span class="sectionToc" >4 <a 
href="#x1-50004" id="QQ2-1-5">Chroma redundancy</a></span>
<br />   &#x00A0;<span class="sectionToc" >5 <a 
href="#x1-60005" id="QQ2-1-6">The <!--l. 7--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
transform</a></span>
<br />   &#x00A0;<span class="sectionToc" >6                      <a 
href="#x1-70006" id="QQ2-1-7">Quantization                      in                      the
<!--l. 8--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math> domain</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >6.1 <a 
href="#x1-80006.1" id="QQ2-1-8">Rate-control</a></span>
<br />   &#x00A0;<span class="sectionToc" >7 <a 
href="#x1-90007" id="QQ2-1-9">Resources</a></span>
   </div>
<!--l. 8--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>The <!--l. 8--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
color domain</h3>
                                                                  

                                                                  
<!--l. 9--><p class="noindent" ><!--l. 9--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math> is a <span 
class="ecti-1000">luma</span>-based
&#x0028;luminance-based<span class="footnote-mark"><a 
href="index2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-2001f1"></a> 
color domain. This domain rely on the idea of separating the luminance
coe&#xFB03;cients &#x0028;Y&#x0029; from two <span 
class="ecti-1000">chroma </span>coe&#xFB03;cients &#x0028;orange and green in the case of
<!--l. 13--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>&#x0029;.
</p><!--l. 15--><p class="indent" >   The <!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math> color model
is a succesor of th <!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>
one, where the transform &#xFB01;lters has been rede&#xFB01;ned to be more e&#xFB03;cient &#x0028;considering
more and new images&#x0029;. Moreover, it can be also considered a the digital version of
the <a 
href="https://en.wikipedia.org/wiki/YUV" ><!--l. 20--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YUV</mtext></mstyle></math>
&#x0028;analog&#x0029; color model</a>.
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-30002"></a>Color decorrelation with the <!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
transform</h3>
<!--l. 23--><p class="noindent" >The <!--l. 23--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math> is a
near-orthogonal&#x00A0;<span class="cite">&#x005B;<span 
class="ecbx-1000">?</span>&#x005D;</span> transform&#x00A0;<span class="cite">&#x005B;<a 
href="#Xvruiz__transform_coding">3</a>&#x005D;</span> that has been speci&#xFB01;cally designed to accumulate energy in the
<!--l. 25--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math> luma subband&#x00A0;<span class="cite">&#x005B;<a 
href="#Xvruiz__image_IO">2</a>&#x005D;</span>.
The subbands <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Co</mtext></mstyle></math>
and <!--l. 27--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cg</mtext></mstyle></math>
represents the croma &#x0028;orange and green, respectively&#x0029;. The size of the subbands is the
same than the number of pixels in the original image.
</p><!--l. 31--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-40003"></a>E&#xFB00;ects of the transform</h3>
<!--l. 32--><p class="noindent" >Basically the same than in the case of the DCT:
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-4002x1">
     <!--l. 34--><p class="noindent" >Smaller entropy &#x0028;better RD curves&#x0029;.
     </p></li>
<li 
  class="enumerate" id="x1-4004x2">
     <!--l. 35--><p class="noindent" >High dynamic range &#x0028;more points in the RD curves&#x0029;.</p></li></ol>
                                                                  

                                                                  
<!--l. 38--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-50004"></a>Chroma redundancy</h3>
<!--l. 40--><p class="noindent" >Humans do not perceive detail in the chrominance as well as in they does in the luminance.&#x00A0;<span class="cite">&#x005B;<a 
href="#Xvruiz__visual_redundancy">4</a>,&#x00A0;<a 
href="#Xburger2016digital">1</a>&#x005D;</span>.
As in <!--l. 43--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>,
the <a 
href="https://en.wikipedia.org/wiki/Sampling_(signal_processing)" >sampling rate</a> of the chroma is usually reduces to 1/4 without any noticeable
distortion. This feature is used in some of the last image and video compression
systems such as <a 
href="https://en.wikipedia.org/wiki/JPEG_XR#Description" >JPEG XR</a> and <a 
href="https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding#Video_coding_layer" >HEVC</a>.
</p><!--l. 51--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-60005"></a>The <!--l. 51--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
transform</h3>
<!--l. 54--><p class="noindent" >Clearly, orthogonality is a desired property in lossy compression systems because it helps
to isolate<span class="footnote-mark"><a 
href="index3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-6001f2"></a> 
the impact &#x0028;in the case of a color transform&#x0029; of each color subband on the quality of
the reconstruction of the image, simplifying signi&#xFB01;cantly the determination of the
pattern of QSs that generate the optimal RD curve.
</p><!--l. 61--><p class="indent" >   Moreover, Eqs.&#x00A0;<span 
class="ecbx-1000">??</span> and <span 
class="ecbx-1000">??</span> were derived by <a 
href="https://en.wikipedia.org/wiki/Principal_component_analysis" >Principal Component Analysis &#x0028;PCA&#x0029;</a> on
old<span class="footnote-mark"><a 
href="index4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-6002f3"></a> 
video data. The same procedure has been carried out with
newer<span class="footnote-mark"><a 
href="index5.html#fn4x0"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-6003f4"></a> 
images, obtaining </p><table class="equation"><tr><td>
<!--l. 67--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-6004r1"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
> <mstyle 
class="text"><mtext  >C</mtext></mstyle> </mrow><mrow 
>
1</mrow></msub 
>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
>  <mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
>2</mrow></msub 
>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable></mo>                                                            </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">   <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>    </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mn>0</mn>  </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                    </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">&#x21D4;</mo> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>1</mn>   </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>2</mn></mrow>
<mrow 
><mn>3</mn></mrow></mfrac>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn>   </mtd><mtd 
class="array"  columnalign="center">   <mfrac><mrow 
><mn>4</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>    </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>2</mn></mrow>
<mrow 
><mn>3</mn></mrow></mfrac>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                     </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="center">   <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
> <mstyle 
class="text"><mtext  >C</mtext></mstyle> </mrow><mrow 
>
<mn>1</mn></mrow></msub 
>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
>  <mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
><mn>2</mn></mrow></msub 
>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                                    </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;1&#x0029;</td></tr></table>
                                                                  

                                                                  
<!--l. 106--><p class="indent" >   The <a 
href="https://en.wikipedia.org/wiki/YCoCg" >YCoCg</a> color transform is orthogonal and the synthesis &#xFB01;lters
gains<span class="footnote-mark"><a 
href="index6.html#fn5x0"><sup class="textsuperscript">5</sup></a></span><a 
 id="x1-6005f5"></a>  are
22/9 &#x0028;for <!--l. 110--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>&#x0029;,
25/9 &#x0028;for <!--l. 110--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
><mn>1</mn></mrow></msub 
></math>&#x0029; and
22/9 &#x0028;for <!--l. 110--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
><mn>2</mn></mrow></msub 
></math>&#x0029;.
</p><!--l. 112--><p class="indent" >   Unfortunately, from a perceptual perspective we must impose &#x0028;thinking of the
subsampling of the chromas&#x0029; some features in a color transform &#x0028;such as the in&#xFB02;uence
of the green channel on the luma channel should be high&#x0029; that violates the
orthogonality constrain <span class="cite">&#x005B;<a 
href="#Xmalvar2008lifting">5</a>&#x005D;</span>. For this reason the authors &#xFB01;nally propose the transform
</p><table class="equation"><tr><td>
<!--l. 118--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-6006r2"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >Co</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Cg</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable></mo>                                                           </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">   <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>4</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>4</mn></mrow></mfrac>    </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mn>0</mn>  </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                    </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">&#x21D4;</mo> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>1</mn>   </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mn>0</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mn>1</mn></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                  </mrow><mo fence="true" form="postfix">]</mo></mrow> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >Co</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Cg</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                              </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc">,</mo>
</math></td><td class="eq-no">&#x0028;2&#x0029;</td></tr></table>
<!--l. 155--><p class="indent" >   that is near orthogonal<span class="footnote-mark"><a 
href="index7.html#fn6x0"><sup class="textsuperscript">6</sup></a></span><a 
 id="x1-6007f6"></a> ,
and has channel gains 3 &#x0028;<!--l. 157--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>&#x0029;,
2 &#x0028;<!--l. 158--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Co</mtext></mstyle></math>&#x0029; and
3 &#x0028;<!--l. 158--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cg</mtext></mstyle></math>&#x0029;.
</p><!--l. 160--><p class="indent" >   Again, notice that if the <!--l. 160--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle></math>
values ranges between <!--l. 160--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn></math>
and <!--l. 161--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>2</mn><mn>5</mn><mn>5</mn></math> &#x0028;and rounding to
the nearest integer&#x0029;, <!--l. 161--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Y</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>2</mn><mn>5</mn><mn>5</mn></math>,
<!--l. 162--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin">&#x2212;</mo> <mn>1</mn><mn>2</mn><mn>8</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Co</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>1</mn><mn>2</mn><mn>7</mn></math> and
<!--l. 162--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin">&#x2212;</mo> <mn>1</mn><mn>2</mn><mn>8</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Cg</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>1</mn><mn>2</mn><mn>7</mn></math>, and
therefore, the number of bits that are necessary to represent each component is
<!--l. 164--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>8</mn></math>.
Therefore, we can use the same QS range for each component. See this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/YCrCb_matrix.ipynb" >notebook</a>.
</p>
                                                                  

                                                                  
   <h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-70006"></a>Quantization in the <!--l. 169--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
domain</h3>
<!--l. 170--><p class="noindent" >Unlike the DCT, the gains of the synthesis &#xFB01;lters of the inverse
<!--l. 171--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
transform are not the same. As it can be seen in <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/YCoCg_SQ/YCoCG_SQ.ipynb" >YCoCG_SQ.ipynb</a>, the
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math> and the
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cg</mtext></mstyle></math> subbands are
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>3</mn><mo 
class="MathClass-bin">&#x2215;</mo><mn>2</mn></math> times more
energetic than the <!--l. 174--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Co</mtext></mstyle></math>
subband. This basically means that the quantization error&#x00A0;<span class="cite">&#x005B;<span 
class="ecbx-1000">?</span>&#x005D;</span> generated in the
<!--l. 176--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math> and
<!--l. 176--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cg</mtext></mstyle></math>
subbands is more relevant that the quantization error generated in the
<!--l. 177--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Co</mtext></mstyle></math> subband
&#x0028;exactly, <!--l. 178--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>1</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn></math>
times more important&#x0029;. Therefore, the
</p><!--l. 180--><p class="indent" >   Again, like in the color-DCT, ignoring the possible e&#xFB00;ects of the entropy encoding
stage &#x0028;that could compress more some color subbands&#x0029;, the previous gains suggest to
use </p><table class="equation"><tr><td>
<!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                        <mstyle 
   id="x1-7001r3"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"><mfrac><mrow 
>3</mrow>
<mrow 
>2</mrow></mfrac></mo><msub><mrow 
><mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >Y</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo><msub><mrow 
> <mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >Co</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <mfrac><mrow 
><mn>3</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac><msub><mrow 
><mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >Cg</mtext></mstyle></mrow></msub 
><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;3&#x0029;</td></tr></table>
<!--l. 186--><p class="indent" >   See this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/YCrCb_matrix.ipynb" >notebook</a>.
</p><!--l. 188--><p class="indent" >   If the RD slope of each point depends also on the performance of DEFLATE
&#x0028;something that is normal&#x0029;, we can &#xFB01;nd the optimal RD curve with the
algorithm:
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-7003x1">
     <!--l. 190--><p class="noindent" >Varilling the <!--l. 190--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi mathvariant="normal">&#x0394;</mi></math>,
     estimate &#x0028;remember that YCoCg is only near-orthonal&#x0029;, the RD curve
     of each YCoCg subband can de found &#x0028;without considering the rest of
     subbands&#x0029;.
     </p></li>
                                                                  

                                                                  
<li 
  class="enumerate" id="x1-7005x2">
     <!--l. 191--><p class="noindent" >Sort the RD points by their slope.
     </p></li>
<li 
  class="enumerate" id="x1-7007x3">
     <!--l. 192--><p class="noindent" >Apply progressively the combinations of quantization steps. Measure the
     distortion in the RGB domain &#x0028;in the transform domain could be only
     estimated&#x0029;.</p></li></ol>
<!--l. 200--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">6.1   </span> <a 
 id="x1-80006.1"></a>Rate-control</h4>
<!--l. 202--><p class="noindent" >When the transform is orthogonal, the quantization step of a subband should be
inversely proportional to the subband gain.
</p><!--l. 205--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">7   </span> <a 
 id="x1-90007"></a>Resources</h3>
   <div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 &#x005B;1&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xburger2016digital"></a>W.&#x00A0;Burger and M.J. Burge.  <a 
href="https://educons.edu.rs/wp-content/uploads/2020/05/2016-Digital-Image-Processing.pdf" ><span 
class="ecti-1000">Digital Image Processing: An Algorithmic</span>
   <span 
class="ecti-1000">Introduction Using Java</span></a>. Springer, 2016.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;2&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xvruiz__image_IO"></a>V.&#x00A0;Gonz&#x00E1;lez-Ruiz. <a 
href="https://vicente-gonzalez-ruiz.github.io/image_IO/" >Image IO</a>.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;3&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xvruiz__transform_coding"></a>V.&#x00A0;Gonz&#x00E1;lez-Ruiz. <a 
href="https://vicente-gonzalez-ruiz.github.io/transform_coding/" >Transform Coding</a>.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;4&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xvruiz__visual_redundancy"></a>V.&#x00A0;Gonz&#x00E1;lez-Ruiz. <a 
href="https://vicente-gonzalez-ruiz.github.io/visual_redundancy/" >Visual Redundancy</a>.
   </p>
                                                                  

                                                                  
   <p class="bibitem" ><span class="biblabel">
 &#x005B;5&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xmalvar2008lifting"></a>H.S. Malvar, G.J. Sullivan, and S.&#x00A0;Srinivasan.  <a 
href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/2008_ColorTransforms_MalvarSullivanSrinivasan.pdf" >Lifting-based reversible
   color  transformations  for  image  compression</a>.   In  <span 
class="ecti-1000">Applications of Digital</span>
   <span 
class="ecti-1000">Image  Processing  XXXI</span>,  volume  7073,  pages  707307&#x2013;1  &#x2013;  707307&#x2013;10.
   International Society for Optics and Photonics, 2008.
</p>
   </div>
    
</body></html> 

                                                                  


